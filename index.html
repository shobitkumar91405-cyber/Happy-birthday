<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dearest Khushi ‚ù§Ô∏è</title>
    <style>
        /* General Styles & Variables */
        :root {
            --primary-pink: #ff4d6d;
            --soft-pink: #ffb3c1;
            --dark-pink: #c9184a;
            --bg-dark: #120107;
            --text-light: #fefefe;
            --text-dark: #333;
        }

        body {
            margin: 0;
            padding: 0;
            background: var(--bg-dark);
            font-family: 'Georgia', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            color: var(--text-light);
            min-height: 100vh;
            position: relative;
        }

        /* Credits Section */
        .header-credit {
            padding: 10px;
            font-size: 14px;
            letter-spacing: 2px;
            color: var(--soft-pink);
            text-transform: uppercase;
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }

        /* Floating Hearts Animation */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .hearts-container .heart {
            position: absolute;
            animation: floatUp 4s linear infinite;
            font-size: 20px;
            color: var(--primary-pink);
            transform: translateY(0);
        }

        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100vh); opacity: 0; }
        }

        /* The Book Styling */
        .book-container {
            perspective: 1500px;
            margin-top: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 150px); /* Adjust for header and buttons */
            position: relative;
            z-index: 10;
        }

        .book {
            width: 350px;
            height: 500px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s ease;
            cursor: pointer;
        }

        .book.open {
            transform: rotateY(-180deg) translateX(50%);
        }

        .page {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background: #fff;
            color: var(--text-dark);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform-origin: left;
            transform-style: preserve-3d;
            transition: transform 1s;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            border-radius: 5px 15px 15px 5px;
            overflow-y: auto; /* For long messages/content */
        }

        .cover {
            background: linear-gradient(45deg, var(--dark-pink), var(--primary-pink));
            color: white;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-radius: 5px 15px 15px 5px;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        /* Content Styling */
        h1, h2, h3 { color: var(--dark-pink); text-align: center; margin-bottom: 10px;}
        .cover h1 { color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        .media-container {
            width: 100%;
            max-height: 250px; /* Adjusted for better fit */
            margin: 10px auto;
            background: #eee;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
        }

        img, video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Use contain to show full image/video */
            border-radius: 8px;
        }

        .message-text {
            font-size: 15px;
            line-height: 1.6;
            text-align: justify;
            margin-top: 10px;
            font-style: italic;
            color: #555;
        }

        /* Navigation Buttons */
        .nav-buttons {
            margin: 20px auto;
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        button {
            background: var(--primary-pink);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 4px 10px rgba(255, 77, 109, 0.4);
            transition: all 0.3s ease;
        }

        button:hover {
            background: var(--dark-pink);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 77, 109, 0.6);
        }

        /* Audio Player */
        .audio-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 77, 109, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .audio-player label {
            color: var(--text-light);
            font-size: 14px;
        }

        /* Special Effects/Animations */
        .heart-glow {
            animation: pulse 1.5s infinite alternate;
        }
        @keyframes pulse {
            0% { transform: scale(1); filter: drop-shadow(0 0 5px var(--soft-pink)); }
            100% { transform: scale(1.05); filter: drop-shadow(0 0 15px var(--primary-pink)); }
        }

        /* Countdown Timer */
        #countdown {
            font-size: 2em;
            font-weight: bold;
            margin-top: 30px;
            color: var(--soft-pink);
            text-shadow: 0 0 10px var(--primary-pink);
        }
        #countdown div {
            display: inline-block;
            margin: 0 10px;
            position: relative;
        }
        #countdown div span {
            display: block;
            font-size: 0.5em;
            text-transform: uppercase;
            color: white;
            margin-top: 5px;
        }

        /* Fireworks animation (simplified for single file) */
        .fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1000;
            display: none; /* Hidden by default */
        }
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: fireworkExplode 1s forwards;
        }
        @keyframes fireworkExplode {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(10); opacity: 0; }
        }

    </style>
</head>
<body>

    <div class="header-credit">MADE BY SIVASINGH</div>

    <div class="hearts-container" id="hearts"></div>
    <div class="fireworks-container" id="fireworks"></div>

    <div class="book-container">
        <div class="book" id="myBook">
            
            <div class="page cover" id="p1" style="z-index: 10;">
                <img src="heart1.gif" style="width: 120px;" class="heart-glow">
                <h1>My Dearest Khushi ‚ù§Ô∏è</h1>
                <p style="font-size: 1.2em; margin-top: 15px;">A Little Book of Our Love Story</p>
                <p style="font-size: 0.9em; margin-top: 20px;">Click me to dive in!</p>
            </div>

            <div class="page" id="p2" style="z-index: 9;">
                <h2>My Everything!</h2>
                <div class="media-container">
                    <img src="photo1.jpg" alt="Our First Picture">
                </div>
                <p class="message-text">
                    "Khushi, from the moment I first saw you, my world transformed into a vibrant wonderland. You bring
                    so much joy, laughter, and warmth into my life. Every day with you is a new adventure, a new reason
                    to smile. You're not just my girlfriend, you're my best friend, my confidante, and my greatest love."
                </p>
                <img src="cute.gif" style="width: 80px; align-self: center; margin-top: 15px;">
            </div>

            <div class="page" id="p3" style="z-index: 8;">
                <h2>Our Special Moments</h2>
                <div class="media-container">
                    <video id="vdo1" controls>
                        <source src="video1.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <p class="message-text">
                    "Remember this moment? It's one of my absolute favorites. Every time I watch it, it reminds me of
                    the pure happiness we share. You have a way of making every ordinary moment feel extraordinary.
                    Thank you for being you, my love."
                </p>
                <p style="text-align: center; margin-top: 10px; font-size: 0.9em;">
                    <audio id="audio1" controls src="Happy_Birthday_Song_R.mp3"></audio>
                    (Our happy song!)
                </p>
            </div>

            <div class="page" id="p4" style="z-index: 7;">
                <h2>A Glimpse of Us</h2>
                <div class="media-container">
                    <img src="photo2.jpg" alt="Photo 2">
                </div>
                <div class="media-container" style="height: 150px;">
                    <img src="gif1.gif" alt="Gif 1">
                </div>
                <p class="message-text">
                    "Each picture tells a story, and ours is my favorite fairy tale. From our silly moments to our deepest
                    conversations, I cherish every single memory we create together. Here's to many, many more!"
                </p>
                <img src="heart2.gif" style="width: 60px; align-self: center; margin-top: 10px;">
            </div>

            <div class="page" id="p5" style="z-index: 6;">
                <h2>My Heart's Confession</h2>
                <div class="media-container">
                    <img src="photo3.jpg" alt="Photo 3">
                </div>
                <p class="message-text">
                    "You've captured my heart in a way no one ever has. With you, I feel complete, understood, and
                    loved beyond measure. My love for you grows stronger with each passing day, like a beautiful
                    flower blooming in my soul."
                </p>
                <div class="media-container" style="height: 120px;">
                    <img src="gif2.gif" alt="Gif 2">
                </div>
            </div>

            <div class="page" id="p6" style="z-index: 5;">
                <h2>A Kiss for My Love</h2>
                <div class="media-container">
                    <img src="kiss.gif" alt="Kiss">
                </div>
                <p class="message-text">
                    "Every kiss with you is a moment suspended in time, a sweet promise of our unending love.
                    You are the melody in my heart, the sunlight in my darkest days, and the reason I believe in true love."
                </p>
                <audio id="audio2" controls src="broken.mp3"></audio> (Just kidding! Our love is strong!)
            </div>

            <div class="page" id="p7" style="z-index: 4;">
                <h2>Treasured Moments</h2>
                <div class="media-container">
                    <video id="vdo2" controls>
                        <source src="video2.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <p class="message-text">
                    "This video reminds me of how much fun we always have. Life with you is never boring;
                    it's a constant source of joy and excitement. I can't wait to create countless more videos
                    and memories with you, my darling."
                </p>
                <audio id="audio3" controls src="newsong.mp3"></audio> (A new song for us!)
            </div>

            <div class="page" id="p8" style="z-index: 3;">
                <h2>Countdown to Forever!</h2>
                <p class="message-text" style="font-size: 1.1em;">
                    "Every second brings us closer to our next beautiful chapter.
                    Counting down the days until we celebrate our love again!"
                </p>
                <div id="countdown" style="margin-top: 20px;"></div>
                <img src="endlove.gif" style="width: 100px; align-self: center; margin-top: 15px;">
            </div>

            <div class="page" id="p9" style="z-index: 2;">
                <h2>My Promise to You</h2>
                <div class="media-container">
                    <img src="promise.gif" alt="Promise">
                </div>
                <p class="message-text">
                    "I promise to always be there for you, through thick and thin. To support your dreams,
                    to laugh with you, to cry with you, and to love you fiercely every single day.
                    You are my forever and always."
                </p>
                <p style="text-align: center; margin-top: 20px; font-weight: bold;">
                    Will you be my Valentine, Khushi? (Or, Will you be mine, forever?)
                </p>
                <img src="rose.gif" style="width: 80px; align-self: center; margin-top: 10px;">
            </div>

            <div class="page" id="p10" style="z-index: 1;">
                <h2>My Eternal Love</h2>
                <p class="message-text" style="font-size: 1.1em;">
                    "Khushi, you are the most incredible person I've ever known. My love for you is boundless and
                    eternal. Thank you for making my life so beautiful and meaningful. I love you more than words can say."
                </p>
                <div class="media-container">
                    <img src="sorry1.gif" alt="Sorry" style="filter: grayscale(100%); opacity: 0.7;">
                    <p style="position: absolute; color: white; text-shadow: 2px 2px 5px black; font-size: 1.2em;">(Never sorry for loving you!)</p>
                </div>
                <button onclick="triggerFireworks()" style="margin-top: 20px; align-self: center;">üíñ SURPRISE! üíñ</button>
            </div>

        </div>
    </div>

    <div class="nav-buttons">
        <button onclick="prevPage()">PREVIOUS PAGE</button>
        <button onclick="nextPage()">NEXT PAGE</button>
    </div>

    <div class="audio-player">
        <label for="bgMusicToggle">Romantic BGM:</label>
        <audio id="bgMusic" loop>
            <source src="tere-liye.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <button id="musicBtn" onclick="toggleMusic()">üéµ Play Music</button>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 10; // Updated total pages
        const book = document.getElementById('myBook');
        const bgMusic = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('musicBtn');

        // All video and audio elements
        const allVideos = document.querySelectorAll('video');
        const allAudios = document.querySelectorAll('audio:not(#bgMusic)'); // Exclude background music

        // --- Book Navigation Logic ---
        function nextPage() {
            if (currentPage < totalPages) {
                stopAllMedia(); // Stop all media before turning page
                const page = document.getElementById('p' + currentPage);
                page.classList.add('flipped');
                page.style.zIndex = totalPages - currentPage; // Update z-index for proper stacking
                currentPage++;
                if (currentPage === 2) {
                    book.classList.add('open');
                }
            }
        }

        function prevPage() {
            if (currentPage > 1) {
                stopAllMedia(); // Stop all media before turning page
                currentPage--;
                const page = document.getElementById('p' + currentPage);
                page.classList.remove('flipped');
                page.style.zIndex = totalPages - currentPage + 1; // Correct z-index for unflipped page
                if (currentPage === 1) {
                    book.classList.remove('open');
                }
            }
        }

        // --- Media Control Logic ---
        function stopAllMedia() {
            allVideos.forEach(video => {
                if (!video.paused) video.pause();
            });
            allAudios.forEach(audio => {
                if (!audio.paused) audio.pause();
            });
            // Optionally, restart background music if it was playing before a video took over
            if (bgMusic.dataset.wasPlaying === 'true') {
                bgMusic.play();
            }
        }

        function toggleMusic() {
            if (bgMusic.paused) {
                bgMusic.play();
                musicBtn.innerText = "üéµ Music On";
                bgMusic.dataset.wasPlaying = 'true';
            } else {
                bgMusic.pause();
                musicBtn.innerText = "üéµ Music Off";
                bgMusic.dataset.wasPlaying = 'false';
            }
        }

        // Pause background music when any other media plays
        allVideos.forEach(video => {
            video.onplay = function() {
                if (!bgMusic.paused) {
                    bgMusic.pause();
                    bgMusic.dataset.wasPlaying = 'true'; // Mark that BGM was playing
                    musicBtn.innerText = "üéµ Music Paused";
                }
            };
            video.onended = video.onpause = function() {
                if (bgMusic.dataset.wasPlaying === 'true') { // If BGM was playing, resume it
                    bgMusic.play();
                    musicBtn.innerText = "üéµ Music On";
                }
            };
        });

        allAudios.forEach(audio => {
            audio.onplay = function() {
                if (!bgMusic.paused) {
                    bgMusic.pause();
                    bgMusic.dataset.wasPlaying = 'true'; // Mark that BGM was playing
                    musicBtn.innerText = "üéµ Music Paused";
                }
            };
            audio.onended = audio.onpause = function() {
                if (bgMusic.dataset.wasPlaying === 'true') { // If BGM was playing, resume it
                    bgMusic.play();
                    musicBtn.innerText = "üéµ Music On";
                }
            };
        });


        // --- Floating Hearts Generator ---
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 3) + 's'; // 3-6 seconds
            heart.style.animationDelay = (Math.random() * 2) + 's'; // up to 2s delay
            heart.innerHTML = '‚ù§Ô∏è';
            document.getElementById('hearts').appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, parseFloat(heart.style.animationDuration) * 1000); // Remove after animation
        }
        setInterval(createHeart, 300); // More frequent hearts

        // --- Countdown Timer for Valentine's Day ---
        const valentineDate = new Date("Feb 14, 2025 00:00:00").getTime();
        const countdownElement = document.getElementById("countdown");

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = valentineDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            if (countdownElement) {
                countdownElement.innerHTML = `
                    <div>${days}<span>Days</span></div>
                    <div>${hours}<span>Hours</span></div>
                    <div>${minutes}<span>Minutes</span></div>
                    <div>${seconds}<span>Seconds</span></div>
                `;

                if (distance < 0) {
                    countdownElement.innerHTML = "Happy Valentine's Day, My Love!";
                }
            }
        }
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call

        // --- Fireworks Animation ---
        function createFirework(x, y) {
            const fwContainer = document.getElementById('fireworks');
            fwContainer.style.display = 'block'; // Show fireworks container
            
            for (let i = 0; i < 30; i++) {
                const fireworkParticle = document.createElement('div');
                fireworkParticle.classList.add('firework');
                fireworkParticle.style.left = x + 'px';
                fireworkParticle.style.top = y + 'px';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 80 + 20; // 20 to 100px spread
                const endX = x + distance * Math.cos(angle);
                const endY = y + distance * Math.sin(angle);

                fireworkParticle.style.setProperty('--end-x', endX + 'px');
                fireworkParticle.style.setProperty('--end-y', endY + 'px');
                
                fireworkParticle.style.background = `hsl(${Math.random() * 360}, 100%, 70%)`;
                fireworkParticle.style.animation = `fireworkSpread 0.8s forwards ease-out`;
                fireworkParticle.style.animationDelay = (Math.random() * 0.3) + 's'; // Slight delay for spread effect

                // Define fireworkSpread keyframes dynamically
                const styleSheet = document.styleSheets[0];
                styleSheet.insertRule(`
                    @keyframes fireworkSpread {
                        0% { transform: translate(0,0) scale(1); opacity: 1; }
                        100% { transform: translate(${endX - x}px, ${endY - y}px) scale(0); opacity: 0; }
                    }
                `, styleSheet.cssRules.length);

                fwContainer.appendChild(fireworkParticle);

                setTimeout(() => fireworkParticle.remove(), 1000); // Remove particle after animation
            }

            setTimeout(() => fwContainer.style.display = 'none', 1500); // Hide container after all fireworks
        }

        function triggerFireworks() {
            // Trigger multiple fireworks at random positions
            for(let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.7; // Upper 70% of screen
                    createFirework(x, y);
                }, i * 200); // Stagger them
            }
        }


        // --- Initial Load Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            // Setup initial z-index for pages
            for (let i = 1; i <= totalPages; i++) {
                document.getElementById('p' + i).style.zIndex = totalPages - i + 1;
            }
            // Add click event to cover to open the book and start music
            document.getElementById('p1').addEventListener('click', () => {
                if (currentPage === 1) { // Only open if on the cover page
                    nextPage();
                    if (bgMusic.paused) {
                        toggleMusic(); // Start background music if not already playing
                    }
                }
            });
        });

    </script>
</body>
</html>
